<!doctype html>
<!--[if lt IE 7 ]> <html lang="en" class="ie6"> <![endif]--> <!--[if IE 7 ]>    <html lang="en" class="ie7"> <![endif]--> <!--[if IE 8 ]>    <html lang="en" class="ie8"> <![endif]--> <!--[if IE 9 ]>    <html lang="en" class="ie9"> <![endif]-->
<!--[if (gt IE 9)|!(IE)]><!--> <html lang="cs"> <!--<![endif]-->
<head>
  <meta charset="UTF-8">
  <meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1">

  <title>STV Ballot</title>
  <meta name="viewport" content="width=device-width, initial-scale=1.0">

  <link rel="shortcut icon" href="favicon.png">
  <link rel="stylesheet" href="css/style.css?v=0.0.1">

  <!--[if lt IE 9]>
  <script src="http://html5shiv.googlecode.com/svn/trunk/html5.js"></script>
  <![endif]-->
    <script data-template-name="connections" type="text/x-handlebars">
       {{#if isServerMode}}
          Connections
       {{/if}}
    </script>
    <script data-template-name="navigation" type="text/x-handlebars">
       Navigation
       {{#each t in tabs}}
           <a {{action changeTab t.tabAction}}{{bindAttr class="t.currentClass"}}>{{t.desc}}</a>
       {{/each}}
    </script>
    <script data-template-name="connecting" type="text/x-handlebars">
       Connecting
       <button {{ action joinSession }}>Connect</button>
    </script>
    <script data-template-name="typing" type="text/x-handlebars">
       {{view Ember.Select contentBinding="pilesCaptions" selectionBinding="currentPileCaption"}}
       <button {{ action clearTable }}{{bindAttr disabled="currentPile.pileClosed"}}>Start over</button>
       <table class="typing">
       <tr> <td>Status</td><!-- indicators row -->
           {{#each b in currentPile.ballots}}
                <td>{{b.errorMessage}}</td>
           {{/each}}
       </tr>
       <tr> <td>Invalid</td><!-- Invalid row -->
           {{#each b in currentPile.ballots}}
                <td>{{view Ember.Checkbox checkedBinding="b.invalid" disabledBinding="currentPile.pileClosed"}}</td>
           {{/each}}
       </tr>
       <tr>  <td>Empty</td><!-- "Empty" row -->
           {{#each b in currentPile.ballots}}
                <td>{{view Ember.Checkbox checkedBinding="b.empty" disabledBinding="currentPile.pileClosed"}}</td>
           {{/each}}
       </tr>
       <!-- Candidates -->
       {{#each c in candidates}}
       <tr>
           <td {{action addVoteFor c}}>{{c.name}}}</td>
           {{#each b in currentPile.ballots}}
               {{#findBEntry c b}}
                    <td>{{view Em.TextField tabindexBinding="computedindex" valueBinding="bentry.order" disabledBinding="currentPile.pileClosed"}}</td>
               {{/findBEntry}}
           {{/each}}
       </tr>
       {{/each}}
       </table>

       <button {{ action addBallot }}{{bindAttr disabled="currentPile.pileClosed"}}>+</button>
       <button {{ action done }}{{bindAttr disabled="currentPile.pileClosed"}}>Done</button>
       <button {{ action print }}{{bindAttr disabled="currentPile.pileOpened"}}>Export protocol</button>
    </script>
    <script data-template-name="vote-running" type="text/x-handlebars">
       <h2>Vote Running</h2>
       <button {{ action print }}>Print ballots</button>
       Typing progress:
       <table>
       {{#each g in pileGroups}}
           <tr>
            <td>{{g}}</td>
           {{#each p in g}}
            <td>
            {{p.progress}}
            </td>
           {{/each}}
            <td>{{g.crosscheckstatus}}</td>
            <td><button {{action reopen g}}>Reopen</button></td>
           </tr>
       {{/each}}
       </table>

       Counting report:

       <button {{ action exportOstv }}>Export to OpenSTV</button>

       <button {{ action runSTV }}>Compute results</button>

       Results - Mandates:
       {{#each m in App.mandatesController}}
            {{m}}<br/>
       {{/each}}

       <button {{ action exportProtocol }}>Export Protocol</button>
    </script>
    <script data-template-name="vote-setup" type="text/x-handlebars">
       <h2>Vote setup:</h2>
       <label>Vote number</label>          {{view Em.TextField valueBinding="voteNo"}}
       <label>Number of candidates</label> {{view Em.TextField valueBinding="candidateCount"}}
       <label>Number of mandates</label>   {{view Em.TextField valueBinding="mandateCount"}}
       <label>Number of ballots</label>    {{view Em.TextField valueBinding="ballotCount"}}
       <label>
           {{view Ember.Checkbox checkedBinding="replacements" classNames="stvb-chkbox"}}
           Elect replacement mandates
       </label>
       <button {{action shuffle }} {{bindAttr disabled="shuffled"}}>Shuffle candidates</button>
       <button {{action launch }} {{bindAttr disabled="launchState"}}>Launch ballot</button>
        Candidates to appear here
       {{#each c in candidates}}
           {{view Em.TextField valueBinding="c.name"}}
           {{view Ember.Select contentBinding="genders" selectionBinding="c.gender"}}
       {{/each}}
    </script>
    <script data-template-name="app-setup" type="text/x-handlebars">
       Enter your name: {{view Em.TextField valueBinding="userName"}}
       {{#each btn in buttons}}
           <button {{ action start btn.ba }} {{bindAttr disabled="btnState"}} >{{ btn.desc }}</button>
       {{/each}}
    </script>
    <script  data-template-name="application" type="text/x-handlebars">
        <h1>Main frame content:</h1>
        {{#if isServerMode}}
            {{view templateName="connections"}}
        {{/if}}
        {{#if tabsEnabled}}
            {{view templateName="navigation"}}
        {{/if}}
        {{outlet}}
    </script>
</head>
<body>
    <script src="js/libs/jquery-1.7.2.min.js"></script>
    <script src="js/libs/handlebars-1.0.0.beta.6.js"></script>
    <script src="js/libs/ember-1.0.pre.js"></script>
    <script src="js/data.js"></script>
    <script src="js/stv_czech_greens.js"></script>
    <script src="js/app.js"></script>
</body>
</html>
